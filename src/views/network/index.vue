<template>
  <div class="container">
    <div id="mian1" style="float:left;width:600px;height: 500px"></div>
  </div>
</template>

<script>
  import * as echarts from 'echarts';
  // import {Test} from '@/api/user'
  export default {
    name: '',

    data() {
      return {
        graph: {
          "nodes": [{
              "id": "0",
              "name": "Myriel",
              "symbolSize": 19.12381,
              "value": 28.685715,
            },
            {
              "id": "1",
              "name": "Napoleon",
              "symbolSize": 4.6666666666666665,
              "value": 4,
            },
            {
              "id": "2",
              "name": "MlleBaptistine",
              "symbolSize": 6.323809333333333,
              "value": 9.485714,
            },
            {
              "id": "3",
              "name": "MmeMagloire",
              "symbolSize": 7.323809333333333,
              "value": 9.485714,
            },
            {
              "id": "4",
              "name": "CountessDeLo",
              "symbolSize": 8.6666666666666665,
              "value": 4,
            },
            // {
            //   "id": "5",
            //   "name": "Geborand",
            //   "symbolSize": 9.6666666666666665,
            //   "value": 4,
            // },
            // {
            //   "id": "6",
            //   "name": "Champtercier",
            //   "symbolSize": 10.6666666666666665,
            //   "value": 4,
            // },
            // {
            //   "id": "7",
            //   "name": "Cravatte",
            //   "symbolSize": 4.6666666666666665,
            //   "value": 4,
            // },
            // {
            //   "id": "8",
            //   "name": "Count",
            //   "symbolSize": 3.6666666666666665,
            //   "value": 4,
            // },
            // {
            //   "id": "9",
            //   "name": "OldMan",
            //   "symbolSize": 4.6666666666666665,
            //   "value": 4,
            // },
            // {
            //   "id": "10",
            //   "name": "Labarre",
            //   "symbolSize": 6.2232,
            //   "value": 4,
            // },

          ],
          "links": [{
              "source": "1",
              "target": "0"
            },
            {
              "source": "2",
              "target": "0"
            },
            {
              "source": "3",
              "target": "0"
            },
            {
              "source": "3",
              "target": "2"
            },
            {
              "source": "4",
              "target": "0"
            },
            {
              "source": "5",
              "target": "0"
            },
            {
              "source": "6",
              "target": "0"
            },
            {
              "source": "7",
              "target": "0"
            },
            {
              "source": "8",
              "target": "0"
            },
            {
              "source": "9",
              "target": "0"
            },

          ],
          "categories": [{
              "name": "ç±»ç›®0"
            },

          ]

        }
      }
    },
    methods: {
      initData() {
        // åŸºäºŽå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®žä¾‹
        var myChart = echarts.init(document.getElementById('mian1'));
        console.log(this.graph)
        this.graph.nodes.forEach(function (node) {
          node.label = {
            show: node.symbolSize > 30
          };
        });
        console.log(this.graph)
        let option = {
          tooltip: {},
          animationDuration: 2000,
          animationEasingUpdate: 'quinticInOut',

          tooltip: {
            formatter: function (x) {
              return x.data.name
            }
          },
          // å½“å‰echartæ˜¯å¦å¼€å¯åŠ¨ç”»ï¼ˆtrue/falseï¼‰
          animation: true,
          // å½“å‰echartè¶…è¿‡è¿™ä¸ªå€¼ï¼ˆ100ï¼‰æ—¶å°†å…³é—­åŠ¨ç”» -- å…³é—­é˜™å€¼
          animationThreshold: 10000,
          // å½“å‰echartçš„åŠ¨ç”»æ—¶å¸¸
          animationDuration: 100000,
          // å½“å‰echartçš„åŠ¨ç”»æ•ˆæžœæ›´æ–°æ—¶
          animationEasingUpdate: "quinticInOut",
          series: [{
              name: "", // æ ‡é¢˜
              type: "graph", // echartç±»åž‹
              layout: "none", // å¸ƒå±€å‚æ•°ï¼šnone/force/circular
              force: {
                repulsion: 100000,
                edgeLength: 200 // çº¿çš„é•¿åº¦
              }, // åŠ›å¯¼å‘å›¾çš„å‚æ•°é…ç½®ï¼ŒæŸ¥æ–‡æ¡£å§ðŸ‘‡
              // [https://echarts.apache.org/zh/option.html#%2Fsearch%2Fforce](https://echarts.apache.org/zh/option.html#/search/force)
              label: {
                show: true,
                position: 'right',
                formatter: function (x) {
                  console.log(x)
                  return x.data.name
                }
              },
              data: this.graph.nodes,
              links: this.graph.links,
              categories: this.graph.categories,
              roam: true,
              legendHoverLink: true,
              focusNodeAdjacency: true,
              draggable: true, // å¯ç§»åŠ¨
              roam: true, //æ·»åŠ ç¼©æ”¾å’Œç§»åŠ¨
              lineStyle: {
                color: "source",
                curveness: 0.3
              }
            }
          ]
        }
        myChart.setOption(option);

      },
      mounted() {
        // Test().then(res => {
        //   console.log(1)
        // }).catch(err => {
        //   console.log(2)
        // })
        this.initData();
      },
      
      created() {

      }
    }
  }
</script>
<style>


</style>
